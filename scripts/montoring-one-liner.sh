echo -e "---Syslog Logging---\nPORT=`who am i | awk '{ print $5 }' | sed 's/(//g' | sed 's/)//g'`\nlogger -p local7.notice -t "bash $LOGNAME $$" User $LOGNAME logged from $PORT\nfunction history_to_syslog\n{\ndeclare cmd\ndeclare p_dir\ndeclare LOG_NAME\ncmd=$(history 1)\ncmd=$(echo $cmd |awk '{print substr($0,length($1)+2)}')\np_dir=$(pwd)\nLOG_NAME=$(echo $LOGNAME)\nif [ "$cmd" != "$old_command" ]; then\nlogger -p local7.notice -- SESSION = $$, from_remote_host = $PORT,  USER = $LOG_NAME,  PWD = $p_dir, CMD = "${cmd}"\nfi\nold_command=$cmd\n}\ntrap history_to_syslog DEBUG || EXIT" >> /home/.bashrc
